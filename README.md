# 医院选址问题

## 题目

1. 问题描述  

   - 有一个乡镇，共有n个村庄，现在要建立一家医院。
   - 设计算法，满足如下选址要求：使得所有村庄到达医院都最近。

2. 基本要求  

   - 随机生成一个有n个村庄和村庄间的路径及路径长度，并输出；
   - 显示出各村庄到医院的路径和路径长度。

## 程序设计

1. 分析  
   - 使用带权无向图(VGraph)表示乡村路网，使用邻接矩阵以便填充随机数据；
   - 得到邻接矩阵后，使用弗洛伊德(Floyed)算法计算一次最短路径，将得到两两顶点之间的最短路径用矩阵（二位数组）的方式存储在D_Sum[MVNum]中；
   - 得到的最短路径矩阵依然是对称矩阵，将一个顶点与其他顶点的最短路径的长度全部加起来，得到它的偏心度，偏心度最小的顶点就是中心点，完成选址；
   - 输出路径在DisplayPath函数中递归调用实现，路径长度已经存储在D_Sum[MVNum]中，直接使用下标输出即可；

2. 生成路径  
   生成路径即生成并填充带权无向连通图，生成路径在CreateVillage()函数中调用CreateMatrix()函数实现，CreateVillage()函数中实现了对输入顶点个数的判断，顶点的数量有以下几类情况：
   - 顶点数目为0，此时没有选址必要；
   - 顶点数目为1，此时没有选址必要；
   - 顶点数目为2，可以进行选址，但是结合本题实际，在只考虑距离的情况下，无论选在那个顶点，路径长度都相同；
   - 顶点数目在3及以上，可以在使用算法生成并填充路径长度；
   - 顶点数目非常大，实际上，算法将最最大的顶点数目作了宏定义，考虑到算法并不完美，未考虑到内存资源，默认定义最大值为20；

3. 删除路径  
   - 考虑到实际情况，当顶点数量比较大时，每个村庄之间不一定都有路径，还需要删去一些路径；
   - 假设用户输入n条边，这里填充完毕后将随机删除最多n-2条边，一个完全无向连通图的任一顶点都有n-1条边，任意删除n-2条边后还是无向连通图；这里的删除操作将目标元素置为最大值MaxInt（32767）；生成顶点的名称为int类型，从0开始按顺序填充；

4. 计算  
   - 计算路径包括ShortPath()、LocateHospital()和SumDestination()函数；
   - ShortPath()函数，传入带权无向图的邻接矩阵，弗洛伊德（Floyed）算法可以将每两点间的最短路径长度计算并保存在D[MVNum][MVNum]矩阵中，将最短路径上所有顶点的前一顶点的序号存放在Path[MVNum][MVNum]矩阵中；
   - 计算偏心度，偏心度定义为顶点到其他顶点的最短路径长度之和，由于D[MVNum][MVNum]矩阵中已经存放了每两点之间的最短路径长度，矩阵为对称矩阵，顶点偏心度只需要将顶点所在的某一行或某一列相加即可，SumDestination()函数将每一顶点的偏心度计算并保存在D_Sum[MVNum]顺序表中；
   - LocateHospital()进行顶点数量次的循环，不断寻找偏心度较小的值，循环结束后返回下标，下标数字即顶点的名字，也是顶点在顶点表中的位置。

5. 输出  
   - 由ShowDestination()调用DisplayPath()函数完成；
   - 使用顶点个数次的循环，从0开始，输出路径由DisplayPath完成，偏心度就是路径长度，只需要用下标就可以在D_Sum[MVNum]二维数组中找到路径长度；
   - 弗洛伊德（Floyed）算法执行完毕后会生成前一顶点的序号存放在Path[MVNum][MVNum]矩阵中，如果如果顶点i和j之间无弧，则将j的前驱置为-1；
   - 显示路径由DisplayPath()函数递归调用实现，需要三个参数，VGraph, begin, end，其中begin和end分别为起点和终点的下标，如果Path[begin][end]不为-1，就递归调用函数本身。

## 说明

程序只是完成了一个小小的课程设计题目，如果对你有帮助希望点亮一下Star。
